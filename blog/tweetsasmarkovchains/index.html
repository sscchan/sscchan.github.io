
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Modelling Tweets as Markov Chains</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=f20b6011d7">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://sscchan.github.io/blog/tweetsasmarkovchains/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="http://sscchan.github.io/blog/tweetsasmarkovchains/amp/">
    
    <meta property="og:site_name" content="Stephen Chan's Blog">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Modelling Tweets as Markov Chains">
    <meta property="og:description" content="To celebrate the end of the 2016, let's model president-elect Trump's 2016 tweets as a Markov Chain!  Project Code on: GitHub |  Live Demo What is a Markov Chain? Markov Chains are stochastic processes that satisfy the Markov Property. Markov Chains are described &quot;memoryless&quot;, where the probability of the future state">
    <meta property="og:url" content="http://sscchan.github.io/blog/tweetsasmarkovchains/">
    <meta property="og:image" content="http://sscchan.github.io/blog/content/images/2017/04/TwitterGeneratorBanner.png">
    <meta property="article:published_time" content="2017-01-01T20:26:00.000Z">
    <meta property="article:modified_time" content="2017-04-10T21:38:00.000Z">
    <meta property="article:tag" content="markov chains">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="twitter">
    <meta property="article:tag" content="Stochastic Modeling">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Modelling Tweets as Markov Chains">
    <meta name="twitter:description" content="To celebrate the end of the 2016, let's model president-elect Trump's 2016 tweets as a Markov Chain!  Project Code on: GitHub |  Live Demo What is a Markov Chain? Markov Chains are stochastic processes that satisfy the Markov Property. Markov Chains are described &quot;memoryless&quot;, where the probability of the future state">
    <meta name="twitter:url" content="http://sscchan.github.io/blog/tweetsasmarkovchains/">
    <meta name="twitter:image" content="http://sscchan.github.io/blog/content/images/2017/04/TwitterGeneratorBanner.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Stephen Chan">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="markov chains, JavaScript, twitter, Stochastic Modeling">
    <meta property="og:image:width" content="1021">
    <meta property="og:image:height" content="413">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Stephen Chan&#x27;s Blog",
        "logo": "http://sscchan.github.io/blog/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Stephen Chan",
        "url": "http://sscchan.github.io/blog/author/stephen/",
        "sameAs": []
    },
    "headline": "Modelling Tweets as Markov Chains",
    "url": "http://sscchan.github.io/blog/tweetsasmarkovchains/",
    "datePublished": "2017-01-01T20:26:00.000Z",
    "dateModified": "2017-04-10T21:38:00.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://sscchan.github.io/blog/content/images/2017/04/TwitterGeneratorBanner.png",
        "width": 1021,
        "height": 413
    },
    "keywords": "markov chains, JavaScript, twitter, Stochastic Modeling",
    "description": "To celebrate the end of the 2016, let&#x27;s model president-elect Trump&#x27;s 2016 tweets as a Markov Chain!  Project Code on: GitHub |  Live Demo What is a Markov Chain? Markov Chains are stochastic processes that satisfy the Markov Property. Markov Chains are described &quot;memoryless&quot;, where the probability of the future state",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://sscchan.github.io/blog"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Stephen Chan's Blog" href="http://sscchan.github.io/blog/rss/">
    <style>
.vertical, .main-header-content {
    background-color: rgba(0,0,0,0.2);
}
</style>
</head>
<body class="post-template tag-markov-chains tag-javascript tag-twitter tag-stochastic-modeling nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="http://sscchan.github.io/blog/">Home</a></li>
            <li class="nav-github" role="presentation"><a href="https://github.com/sscchan">Github</a></li>
            <li class="nav-linkedin" role="presentation"><a href="https://www.linkedin.com/in/stephenscchan/">LinkedIn</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="http://sscchan.github.io/blog/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head " style="background-image: url(../content/images/2017/04/TwitterGeneratorBanner.png)">
    <nav class="main-nav overlay clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-markov-chains tag-javascript tag-twitter tag-stochastic-modeling">

        <header class="post-header">
            <h1 class="post-title">Modelling Tweets as Markov Chains</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-01-01">01 January 2017</time>  on <a href="../tag/markov-chains/">markov chains</a>, <a href="../tag/javascript/">JavaScript</a>, <a href="../tag/twitter/">twitter</a>, <a href="../tag/stochastic-modeling/">Stochastic Modeling</a>
            </section>
        </header>

        <section class="post-content">
            <p><em>To celebrate the end of the 2016, let's model president-elect Trump's 2016 tweets as a Markov Chain!</em> </p>

<hr>

<p>Project Code on: <a href="https://github.com/sscchan/tweet-markov-chain">GitHub</a> |  <a href="http://sscchan.github.io/portfolio/projects/TweeterMarkov/">Live Demo</a></p>

<p><a href="http://sscchan.github.io/portfolio/projects/TweeterMarkov/"><img src="../content/images/2017/01/MarkovTweetBootScreenshot-1.png" alt="Example of Generated Tweet" title=""></a></p>

<h4 id="whatisamarkovchain">What is a Markov Chain?</h4>

<p><a href="https://en.wikipedia.org/wiki/Markov_chain">Markov Chains</a> are stochastic processes that satisfy the <a href="https://en.wikipedia.org/wiki/Markov_property">Markov Property</a>. Markov Chains are described "memoryless", where the probability of the future state is entirely and only dependent on the current state and not the previous states.</p>

<h4 id="howaretweetsandmarkovchainrelated">How are Tweets and Markov Chain related?</h4>

<p>Are the words contained within a tweet generated via a stochastic process that satisfies the Markov property? <strong><em>absolutely not</em></strong></p>

<p>So why do you want to model tweets as a Markov Chain? <strong>because it's</strong> <strong><em>hilarious</em></strong></p>

<h4 id="gettingthetweetdata">Getting the Tweet Data</h4>

<p>Twitter provides an API for reading and writing tweet data. It's also useless for our purpose because Twitter only returns tweets from the last three weeks. Very sad.</p>

<p>But it looks like <a href="http://www.trumptwitterarchive.com/">trumptwitterarchive.com</a> have a database of historical tweets from the president-elect. So I've copied all of the tweets from 2016 to a local text file.</p>

<h4 id="tweetdatapreprocessing">Tweet Data Preprocessing</h4>

<p>We'll need to pre-process our data so we can produce a sensible looking transition matrix. String elements such as links to articles, quotes and urls are removed using Regex.</p>

<h4 id="modellingtweetsasamarkovchain">Modelling Tweets as a Markov Chain</h4>

<p>Strictly speaking, we are modelling the <strong>process</strong> of writing out a tweet as a Markov Chain. Each word of the tweet is represented by a system state. With the knowledge of the present system state (current word) we can obtain the future system state (next word) using the transition matrix.</p>

<h5 id="atweetsfirstword">A Tweet's First Word:</h5>

<p>We will need to set an initial condition for our system before the Markov process of writing out the subsequent word can begin. From our dataset, we can determine the probability distribution of the first word (initial condition) of the tweet:</p>

<pre><code>function calculateFirstWordsProbabilities(tweets)
{
  let tweetFirstWords = [];
  tweets.forEach(extractFirstWordofTweet);
  tweetFirstWordsProbability = convertToProbabilityArray(tweetFirstWords);

  function extractFirstWordofTweet(tweet) {
    let words = tweet.split(' ');
    tweetFirstWords.push(words[0]);
  }  
}
</code></pre>

<p>If your dataset is small, you can conceivably just populate an array of all of the first words of each tweet (with repeats). That will simplify the process as we no longer need to calculate the cumulative distribution function. This will probably require <strong><em>lots</em></strong> of storage for any decent size dataset.</p>

<h5 id="determiningthetransitionmatrix">Determining the Transition Matrix</h5>

<p>Given that the state space is very large (all unique words within our tweets dataset). I've chosen to implement the transition matrix as an hash table with the <code>key</code> representing the current state and the <code>value</code> as an <code>array</code> of future states and their associated probabilities. This minimises storage requirement as the transition matrix is very sparse.</p>

<pre><code>function populateMarkovFrequencies(tweet) {
  let words = tweet.split(' ');

  for (let i = 0; i &lt; words.length; i++) {
    let word = words[i];
    let isLastWordinTweet = (i === (words.length - 1));

    if (markovTransition[word] === undefined) {
      markovTransition[word] = [];
    }

    if (isLastWordinTweet) {
      markovTransition[word].push('\n');
    } else {
      let nextWordInTweet = words[i+1];
      markovTransition[word].push(nextWordInTweet); 
    }
  }

function processMarkovTransition() {
  for (let word in markovTransition) {
    markovTransition[word] = convertToProbabilityArray(markovTransition[word]);
  }
}
</code></pre>

<h5 id="done">Done!</h5>

<p>All we need to do now is to use the transition matrix to generate our own tweet! </p>
        </section>

        <footer class="post-footer">



            <section class="author">
                <h4><a href="../author/stephen/">Stephen Chan</a></h4>

                    <p>Read <a href="../author/stephen/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Modelling%20Tweets%20as%20Markov%20Chains&amp;url=http://sscchan.github.io/blog/tweetsasmarkovchains/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://sscchan.github.io/blog/tweetsasmarkovchains/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://sscchan.github.io/blog/tweetsasmarkovchains/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story " style="background-image: url(../content/images/2017/04/APETDataInterrogatorBanner.jpg)" href="../retrieving-areal-evapotranspiration-data-for-water-quality-modelling/">
        <section class="post">
            <h2>Retrieving Areal Evapotranspiration Data for Water Quality Modeling</h2>
            <p>Making it easy for non-GIS savvy engineers to access the data they need for water quality modelling.   Project Code…</p>
        </section>
    </a>
    <a class="read-next-story prev " style="background-image: url(../content/images/2017/04/MOGABanner-1.jpg)" href="../optimizing-water-supply-networks-with-genetic-algorithm-part-ii/">
        <section class="post">
            <h2>Optimizing Water Supply Networks with Genetic Algorithm (Part II)</h2>
            <p>This Part II of my blogpost on the application that helps with optimizing water supply networks using genetic algorithm.…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://sscchan.github.io/blog">Stephen Chan's Blog</a> © 2017</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=f20b6011d7"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=f20b6011d7"></script>

</body>
